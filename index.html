<!-- index.html (React + CDN, без Next.js) -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HireMatch — Автоматизация откликов для соискателей</title>
  <meta name="description" content="ИИ анализирует резюме и автоматически отправляет персонализированные заявки на вакансии — для всех, кто ищет работу." />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
  <link rel="shortcut icon" href="/favicon.ico?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v=2" color="#2f84ff">

  <meta name="theme-color" content="#0f1220">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','ui-sans-serif','system-ui','-apple-system','Segoe UI','Roboto','Helvetica','Arial'] },
          colors: {
            base: { 50:'#f5f7fb',100:'#e8edf6',200:'#cfd9ec',300:'#a9b9d9',400:'#7f95c1',500:'#5c73a8',600:'#475a86',700:'#39486a',800:'#2e3a55',900:'#232c41',950:'#0f1220' },
            brand:{ 50:'#eef5ff',100:'#d9e9ff',200:'#b0d0ff',300:'#86b7ff',400:'#5d9eff',500:'#2f84ff',600:'#1167e6',700:'#0d51b4',800:'#093a82',900:'#062551',950:'#041a39' }
          }
        }
      }
    }
  </script>

  <style>
    html { font-size: 18px; }
    body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial}
    .stars{position:absolute;inset:0;background:
      radial-gradient(1000px 600px at 80% 20%,rgba(47,132,255,.12),transparent 70%),
      radial-gradient(800px 500px at 20% 10%,rgba(47,132,255,.08),transparent 70%),
      radial-gradient(700px 400px at 50% 0%,rgba(255,255,255,.06),transparent 70%);
      pointer-events:none;}
    .glow{box-shadow:0 0 0 8px rgba(47,132,255,.15);}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);}
    .shake {animation: shake .3s ease-in-out;}
    @keyframes shake {0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}
  </style>

  <!-- Веб-аналитика Vercel для статических сайтов -->
  <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="bg-base-950 text-white antialiased">
  <div id="root"></div>

  <!-- React 18 из CDN + приложение -->
  <script type="module">
    import React, { useCallback, useEffect, useMemo, useRef, useState } from 'https://esm.sh/react@18';
    import { createRoot } from 'https://esm.sh/react-dom@18/client';

    function HireMatchApp(){
      const [email, setEmail] = useState("");
      const [error, setError] = useState(null);
      const [submitting, setSubmitting] = useState(false);
      const [btnText, setBtnText] = useState("Попробовать");
      const [shake, setShake] = useState(false);

      const formRef = useRef(null);
      const emailRegex = useMemo(() => /^[^\s@]+@[^\s@]+\.[^\s@]+$/, []);

      const clearError = useCallback(() => setError(null), []);
      const showError = useCallback(() => {
        setError("Вы ввели некорректную почту");
        setShake(true);
        setTimeout(()=>setShake(false), 400);
      }, []);

      // Плавный скролл
      const handleAnchorClick = useCallback((e) => {
        const href = (e.currentTarget.getAttribute('href') || '').trim();
        if (href.startsWith('#') && href.length > 1){
          const target = document.querySelector(href);
          if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth'}); }
        }
      }, []);

      // Трекинг источника
      const buildTracking = useCallback(() => {
        const qs = window.location.search || '';
        return {
          referrer: document.referrer || 'direct',
          utm: qs,
          userAgent: navigator.userAgent || '',
          locale: navigator.language || '',
          tzOffsetMin: new Date().getTimezoneOffset()
        };
      }, []);

      // Сабмит формы
      const validateAndSubmit = useCallback(async () => {
        const trimmed = email.trim();
        if(!emailRegex.test(trimmed)) { showError(); return; }
        clearError();
        setSubmitting(true); setBtnText('Отправка…');

        const payload = Object.assign({ email: trimmed }, buildTracking());
        try{
          await fetch('/api/subscribe', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify(payload)
          });
          setBtnText('Готово!'); setEmail('');
        }catch(err){
          console.error('Network error', err);
          setBtnText('Готово!');
        }finally{
          setTimeout(()=>{ setSubmitting(false); setBtnText('Попробовать'); }, 2000);
        }
      }, [email, emailRegex, clearError, showError, buildTracking]);

      const onSubmit = useCallback((e)=>{ e.preventDefault(); validateAndSubmit(); }, [validateAndSubmit]);

      // Мини-тесты (?test=1)
      useEffect(() => {
        if(location.search.indexOf('test=1') === -1) return;
        const tests = {
          'user@example.com': true,
          'user.name+tag@sub.domain.co': true,
          '@example.com': false,
          'user@': false,
          'user@domain': false,
          'user domain.com': false,
          '': false
        };
        let pass = true; let i=0;
        for(const k in tests){ i++; const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)===tests[k]; pass=pass&&ok; console.log('Test', i, k, ok?'✅':'❌'); }
        console.log('All tests passed?', pass);
        console.log('Tracking sample:', buildTracking());
      }, [buildTracking]);

      // Разметка
      return React.createElement(React.Fragment, null,
        // Header
        React.createElement('header', { className:'sticky top-0 z-40 border-b border-white/5 bg-base-950/70 backdrop-blur' },
          React.createElement('div', { className:'mx-auto max-w-7xl px-4 py-3 flex items-center justify-between' },
            React.createElement('a', { href:'#top', onClick:handleAnchorClick, className:'text-xl font-extrabold tracking-tight' },
              'Hire', React.createElement('span', { className:'text-brand-400' }, 'Match')
            ),
            React.createElement('nav', { className:'hidden md:flex gap-6 text-sm text-white/70' },
              React.createElement('a', { href:'#how', onClick:handleAnchorClick, className:'hover:text-white' }, 'Как это работает'),
              React.createElement('a', { href:'#why', onClick:handleAnchorClick, className:'hover:text-white' }, 'Почему мы'),
              React.createElement('a', { href:'#cta', onClick:handleAnchorClick, className:'hover:text-white' }, 'Доступ')
            ),
            React.createElement('a', { href:'#cta', onClick:handleAnchorClick, className:'rounded-full bg-white/10 px-4 py-2 text-sm font-semibold hover:bg-white/15' }, 'Получить доступ')
          )
        ),

        // Hero
        React.createElement('section', { id:'top', className:'relative overflow-hidden' },
          React.createElement('div', { className:'stars', 'aria-hidden':'true' }),
          React.createElement('div', { className:'mx-auto max-w-6xl px-4 pt-20 pb-24 md:pt-28 md:pb-32 relative' },
            React.createElement('div', { className:'max-w-3xl' },
              React.createElement('h1', { className:'text-4xl md:text-6xl font-extrabold leading-tight tracking-tight' },
                'Устаёшь тратить часы на отклики, ', React.createElement('span', { className:'text-brand-400' }, 'которые никто не читает?')
              ),
              React.createElement('p', { className:'mt-5 text-lg md:text-xl text-white/70' }, 'Твоё резюме теряется среди сотен других? Доверь рутину ИИ и получай больше интервью.'),
              React.createElement('div', { className:'mt-8 flex flex-col sm:flex-row gap-3' },
                React.createElement('a', { href:'#cta', onClick:handleAnchorClick, className:'inline-flex items-center justify-center rounded-full bg-brand-500 hover:bg-brand-400 px-6 py-3 font-semibold text-white transition glow' }, 'Получить ранний доступ'),
                React.createElement('a', { href:'#how', onClick:handleAnchorClick, className:'inline-flex items-center justify-center rounded-full border border-white/10 px-6 py-3 font-semibold text-white/90 hover:bg-white/5' }, 'Как это работает')
              )
            )
          )
        ),

        // How
        React.createElement('section', { id:'how', className:'relative' },
          React.createElement('div', { className:'mx-auto max-w-6xl px-4 py-16 md:py-20' },
            React.createElement('h2', { className:'text-3xl md:text-4xl font-extrabold' }, 'HireMatch решает эту проблему'),
            React.createElement('p', { className:'mt-2 text-white/70 max-w-2xl' }, 'Искусственный интеллект автоматизирует поиск работы для соискателей.'),
            React.createElement('div', { className:'mt-10 grid grid-cols-1 md:grid-cols-2 gap-6' },
              React.createElement('div', { className:'card rounded-2xl p-6 transition-transform duration-300 hover:scale-[1.04] hover:shadow-xl hover:shadow-brand-500/10' },
                React.createElement('div', { className:'size-10 rounded-lg bg-brand-500/15 flex items-center justify-center mb-4' }, React.createElement('span', { className:'text-2xl' }, '📄')),
                React.createElement('h3', { className:'text-xl font-bold mb-1' }, 'Загрузи резюме'),
                React.createElement('p', { className:'text-white/70' }, 'Просто загрузи своё резюме — мы проанализируем навыки и опыт и подберём подходящие вакансии.')
              ),
              React.createElement('div', { className:'card rounded-2xl p-6 transition-transform duration-300 hover:scale-[1.04] hover:shadow-xl hover:shadow-brand-500/10' },
                React.createElement('div', { className:'size-10 rounded-lg bg-brand-500/15 flex items-center justify-center mb-4' }, React.createElement('span', { className:'text-2xl' }, '🤖')),
                React.createElement('h3', { className:'text-xl font-bold mb-1' }, 'AI отправляет заявки'),
                React.createElement('p', { className:'text-white/70' }, 'Алгоритм автоматически шлёт персонализированные отклики работодателям. Ты экономишь время и силы.')
              )
            )
          )
        ),

        // Why
        React.createElement('section', { id:'why', className:'relative' },
          React.createElement('div', { className:'mx-auto max-w-6xl px-4 py-16 md:py-20' },
            React.createElement('h2', { className:'text-3xl md:text-4xl font-extrabold' }, 'Почему HireMatch?'),
            React.createElement('p', { className:'mt-2 text-white/70' }, 'Присоединись к соискателям, которые уже получают больше интервью'),
            React.createElement('div', { className:'mt-10 grid grid-cols-1 md:grid-cols-3 gap-6' },
              React.createElement('div', { className:'card rounded-2xl p-6 transition-transform duration-300 hover:scale-[1.04] hover:shadow-xl hover:shadow-brand-500/10' },
                React.createElement('div', { className:'size-10 rounded-lg bg-brand-500/15 flex items-center justify-center mb-4' }, React.createElement('span', { className:'text-2xl' }, '⏰')),
                React.createElement('h3', { className:'text-lg font-bold mb-1' }, 'Экономь до 10 часов в неделю'),
                React.createElement('p', { className:'text-white/70' }, 'Забудь о бесконечном скролле и шаблонных письмах — всё сделаем мы.')
              ),
              React.createElement('div', { className:'card rounded-2xl p-6 transition-transform duration-300 hover:scale-[1.04] hover:shadow-xl hover:shadow-brand-500/10' },
                React.createElement('div', { className:'size-10 rounded-lg bg-brand-500/15 flex items-center justify-center mb-4' }, React.createElement('span', { className:'text-2xl' }, '📈')),
                React.createElement('h3', { className:'text-lg font-bold mb-1' }, 'Больше шансов получить ответ'),
                React.createElement('p', { className:'text-white/70' }, 'Персонализация повышает конверсию откликов и ответы рекрутеров.')
              ),
              React.createElement('div', { className:'card rounded-2xl p-6 transition-transform duration-300 hover:scale-[1.04] hover:shadow-xl hover:shadow-brand-500/10' },
                React.createElement('div', { className:'size-10 rounded-lg bg-brand-500/15 flex items-center justify-center mb-4' }, React.createElement('span', { className:'text-2xl' }, '⚡️')),
                React.createElement('h3', { className:'text-lg font-bold mb-1' }, 'Быстрее найдёшь работу'),
                React.createElement('p', { className:'text-white/70' }, 'HireMatch работает 24/7, пока ты занимаешься своими делами.')
              )
            )
          )
        ),

        // CTA
        React.createElement('section', { id:'cta', className:'relative' },
          React.createElement('div', { className:'mx-auto max-w-6xl px-4 py-16 md:py-20' },
            React.createElement('div', { className:`rounded-3xl border border-white/10 bg-white/[.03] p-8 md:p-12 text-center ${shake ? 'shake' : ''}`, ref: formRef },
              React.createElement('h2', { className:'text-3xl md:text-4xl font-extrabold' }, 'Готов попробовать ', React.createElement('span', { className:'text-brand-400' }, 'HireMatch'), '?'),
              React.createElement('p', { className:'mt-2 text-white/70' }, 'Стань одним из первых, кто получит доступ к платформе, которая ускорит твой поиск работы.'),

              React.createElement('form', { className:'mx-auto mt-8 flex w-full max-w-xl flex-col sm:flex-row items-center gap-3', noValidate:true, onSubmit:onSubmit },
                React.createElement('input', {
                  type:'email', required:true, name:'email', placeholder:'your-email@example.com', value:email,
                  onChange:(e)=>{ setEmail(e.target.value); if(error) clearError(); },
                  className:`flex-1 rounded-full bg-white/5 px-5 py-3 outline-none ring-1 ring-inset ${error ? 'ring-red-500' : 'ring-white/10'} focus:ring-brand-400 transition`
                }),
                React.createElement('button', { type:'submit', disabled:submitting, className:'rounded-full bg-brand-500 px-6 py-3 font-semibold hover:bg-brand-400 transition disabled:opacity-60 disabled:cursor-not-allowed' }, btnText)
              ),

              error && React.createElement('p', { className:'mt-3 text-sm text-red-400' }, error),
              React.createElement('p', { className:'mt-3 text-xs text-white/50' }, 'Никакого спама. Только уведомления о запуске и важные обновления.')
            )
          )
        ),

        // Footer
        React.createElement('footer', { className:'border-t border-white/5' },
          React.createElement('div', { className:'mx-auto max-w-6xl px-4 py-10 flex flex-col md:flex-row items-center justify-between gap-4' },
            React.createElement('a', { className:'text-lg font-extrabold', href:'#top', onClick:handleAnchorClick }, 'Hire', React.createElement('span', { className:'text-brand-400' }, 'Match')),
            React.createElement('nav', { className:'flex gap-6 text-sm text-white/70' },
              React.createElement('a', { href:'#', className:'hover:text-white', onClick:(e)=>e.preventDefault() }, 'Политика конфиденциальности'),
              React.createElement('a', { href:'#', className:'hover:text-white', onClick:(e)=>e.preventDefault() }, 'Контакты')
            ),
            React.createElement('p', { className:'text-xs text-white/50' }, '© 2025 HireMatch. All rights reserved.')
          )
        )
      );
    }

    createRoot(document.getElementById('root')).render(React.createElement(HireMatchApp));
  </script>
</body>
</html>
